# Chi æ¡†æ¶è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ Chi ä¼ä¸šçº§å¾®æœåŠ¡æ¡†æ¶çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»£ç æäº¤ã€æ–‡æ¡£æ”¹è¿›ã€é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½å»ºè®®ã€‚

## ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [è´¡çŒ®æ–¹å¼](#è´¡çŒ®æ–¹å¼)
- [å¼€å‘ç¯å¢ƒæ­å»º](#å¼€å‘ç¯å¢ƒæ­å»º)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æäº¤æµç¨‹](#æäº¤æµç¨‹)
- [é—®é¢˜æŠ¥å‘Š](#é—®é¢˜æŠ¥å‘Š)
- [åŠŸèƒ½è¯·æ±‚](#åŠŸèƒ½è¯·æ±‚)
- [æ–‡æ¡£è´¡çŒ®](#æ–‡æ¡£è´¡çŒ®)
- [å‘å¸ƒæµç¨‹](#å‘å¸ƒæµç¨‹)

## è¡Œä¸ºå‡†åˆ™

å‚ä¸ Chi é¡¹ç›®çš„æ‰€æœ‰äººå‘˜éƒ½åº”éµå®ˆæˆ‘ä»¬çš„è¡Œä¸ºå‡†åˆ™ï¼š

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†åˆ›é€ ä¸€ä¸ªå¼€æ”¾å’Œæ¬¢è¿çš„ç¯å¢ƒï¼Œæˆ‘ä»¬ä½œä¸ºè´¡çŒ®è€…å’Œç»´æŠ¤è€…æ‰¿è¯ºï¼š
- å°Šé‡æ‰€æœ‰å‚ä¸è€…ï¼Œæ— è®ºå…¶ç»éªŒæ°´å¹³ã€æ€§åˆ«ã€æ€§åˆ«è®¤åŒã€æ€§å–å‘ã€æ®‹ç–¾ã€å¤–è²Œã€å¹´é¾„ã€ç§æ—æˆ–å®—æ•™
- æ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„
- ä¸“æ³¨äºå¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

### ä¸å½“è¡Œä¸º

ä¸å¯æ¥å—çš„è¡Œä¸ºåŒ…æ‹¬ï¼š
- ä½¿ç”¨æ€§åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
- äººèº«æ”»å‡»æˆ–ä¾®è¾±æ€§è¯„è®º
- å…¬å¼€æˆ–ç§ä¸‹éªšæ‰°
- æœªç»è®¸å¯å‘å¸ƒä»–äººç§äººä¿¡æ¯
- å…¶ä»–åœ¨ä¸“ä¸šç¯å¢ƒä¸­è¢«è®¤ä¸ºä¸å½“çš„è¡Œä¸º

## è´¡çŒ®æ–¹å¼

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸º Chi æ¡†æ¶åšå‡ºè´¡çŒ®ï¼š

### ğŸ› æŠ¥å‘Šé—®é¢˜
å‘ç° bug æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Ÿè¯· [åˆ›å»º Issue](https://github.com/your-org/basic/issues/new)

### ğŸ’¡ åŠŸèƒ½è¯·æ±‚
æœ‰æ–°åŠŸèƒ½æƒ³æ³•ï¼Ÿè¯·é€šè¿‡ [Feature Request](https://github.com/your-org/basic/issues/new) ä¸æˆ‘ä»¬åˆ†äº«

### ğŸ”§ ä»£ç è´¡çŒ®
- ä¿®å¤ bug
- æ·»åŠ æ–°åŠŸèƒ½
- æ”¹è¿›æ€§èƒ½
- å¢å¼ºæµ‹è¯•è¦†ç›–ç‡

### ğŸ“š æ–‡æ¡£æ”¹è¿›
- ä¿®æ­£æ–‡æ¡£é”™è¯¯
- æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
- ç¿»è¯‘æ–‡æ¡£
- æ”¹è¿› API æ–‡æ¡£

### ğŸ’¬ ç¤¾åŒºæ”¯æŒ
- å›ç­”ç”¨æˆ·é—®é¢˜
- å‚ä¸æŠ€æœ¯è®¨è®º
- åˆ†äº«ä½¿ç”¨ç»éªŒ

## å¼€å‘ç¯å¢ƒæ­å»º

### ç³»ç»Ÿè¦æ±‚

- **Go**: 1.19 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Git**: ç”¨äºç‰ˆæœ¬æ§åˆ¶
- **Make**: ç”¨äºæ„å»ºè„šæœ¬ï¼ˆå¯é€‰ï¼‰
- **Docker**: ç”¨äºæœ¬åœ°æµ‹è¯•ç¯å¢ƒï¼ˆå¯é€‰ï¼‰

### æœ¬åœ°å¼€å‘è®¾ç½®

1. **Fork å’Œå…‹éš†é¡¹ç›®**
   ```bash
   # Fork é¡¹ç›®åˆ°æ‚¨çš„ GitHub è´¦æˆ·
   git clone https://github.com/YOUR_USERNAME/basic.git
   cd basic/pkg/chi
   ```

2. **æ·»åŠ ä¸Šæ¸¸ä»“åº“**
   ```bash
   git remote add upstream https://github.com/your-org/basic.git
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   go mod download
   ```

4. **è¿è¡Œæµ‹è¯•**
   ```bash
   go test ./...
   ```

5. **å¯åŠ¨ç¤ºä¾‹æœåŠ¡**
   ```bash
   cd examples/simple
   go run main.go
   ```

### å¼€å‘å·¥å…·æ¨è

- **IDE**: VS Codeã€GoLandã€Vim/Neovim
- **Go æ’ä»¶**: Go è¯­è¨€æ‰©å±•
- **ä»£ç æ ¼å¼åŒ–**: gofmtã€goimports
- **ä»£ç æ£€æŸ¥**: golangci-lint
- **æµ‹è¯•å·¥å…·**: gotestsum

## ä»£ç è§„èŒƒ

### Go ä»£ç è§„èŒƒ

æˆ‘ä»¬éµå¾ªæ ‡å‡†çš„ Go ä»£ç è§„èŒƒï¼š

1. **æ ¼å¼åŒ–**: ä½¿ç”¨ `gofmt` æ ¼å¼åŒ–ä»£ç 
2. **å¯¼å…¥**: ä½¿ç”¨ `goimports` æ•´ç†å¯¼å…¥
3. **å‘½å**: éµå¾ª Go å‘½åçº¦å®š
4. **æ³¨é‡Š**: ä¸ºå…¬å¼€çš„å‡½æ•°ã€ç±»å‹å’ŒåŒ…æ·»åŠ æ–‡æ¡£æ³¨é‡Š

### ç¤ºä¾‹ä»£ç è§„èŒƒ

```go
// Package microservice provides enterprise-grade microservice framework
// for building scalable and maintainable distributed systems.
package microservice

import (
    "context"
    "fmt"
    "log"

    "github.com/gin-gonic/gin"
    "google.golang.org/grpc"
)

// Service represents a microservice instance with built-in service governance,
// discovery, and observability capabilities.
type Service struct {
    name   string
    config *Config
    engine *gin.Engine
}

// New creates a new microservice instance with the specified name and configuration.
// It initializes the service with default middleware and prepares it for registration
// with service discovery systems.
func New(serviceName string, config *Config) *Service {
    if serviceName == "" {
        log.Fatal("service name cannot be empty")
    }

    return &Service{
        name:   serviceName,
        config: config,
        engine: gin.Default(),
    }
}
```

### é”™è¯¯å¤„ç†

```go
// å¥½çš„é”™è¯¯å¤„ç†
func (s *Service) Start() error {
    if err := s.validateConfig(); err != nil {
        return fmt.Errorf("invalid configuration: %w", err)
    }

    if err := s.registerService(); err != nil {
        return fmt.Errorf("failed to register service: %w", err)
    }

    return s.engine.Run(fmt.Sprintf(":%d", s.config.Port))
}

// é¿å…çš„é”™è¯¯å¤„ç†
func (s *Service) Start() error {
    s.validateConfig() // å¿½ç•¥é”™è¯¯
    s.registerService() // å¿½ç•¥é”™è¯¯
    return s.engine.Run(fmt.Sprintf(":%d", s.config.Port))
}
```

### æµ‹è¯•è§„èŒƒ

```go
func TestService_New(t *testing.T) {
    tests := []struct {
        name        string
        serviceName string
        config      *Config
        want        *Service
        wantErr     bool
    }{
        {
            name:        "valid service",
            serviceName: "test-service",
            config:      &Config{Port: 8080},
            want: &Service{
                name:   "test-service",
                config: &Config{Port: 8080},
            },
            wantErr: false,
        },
        {
            name:        "empty service name",
            serviceName: "",
            config:      &Config{},
            want:        nil,
            wantErr:     true,
        },
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            got := New(tt.serviceName, tt.config)
            if tt.wantErr {
                // éªŒè¯é”™è¯¯æƒ…å†µ
                return
            }

            if got.name != tt.want.name {
                t.Errorf("New() name = %v, want %v", got.name, tt.want.name)
            }
        })
    }
}
```

## æäº¤æµç¨‹

### Git å·¥ä½œæµ

æˆ‘ä»¬ä½¿ç”¨ GitHub Flow å·¥ä½œæµï¼š

1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/your-feature-name
   ```

2. **å¼€å‘åŠŸèƒ½**
   - ç¼–å†™ä»£ç 
   - æ·»åŠ æµ‹è¯•
   - æ›´æ–°æ–‡æ¡£

3. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "feat: add user authentication middleware"
   ```

4. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/your-feature-name
   ```

5. **åˆ›å»º Pull Request**
   - åœ¨ GitHub ä¸Šåˆ›å»º PR
   - å¡«å†™ PR æ¨¡æ¿
   - ç­‰å¾…ä»£ç å®¡æŸ¥

### æäº¤ä¿¡æ¯è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**ç±»å‹ (type)**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼åŒ–
- `refactor`: é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºå·¥å…·æˆ–ä¾èµ–æ›´æ–°

**ç¤ºä¾‹**:
```
feat(microservice): add circuit breaker middleware

Add circuit breaker middleware to prevent cascading failures
in microservice communication.

Closes #123
```

### Pull Request æŒ‡å—

#### PR æ ‡é¢˜
- ä½¿ç”¨æ¸…æ™°ç®€æ´çš„æ ‡é¢˜
- åŒ…å«å˜æ›´ç±»å‹å‰ç¼€
- ä¸è¶…è¿‡ 50 ä¸ªå­—ç¬¦

#### PR æè¿°
è¯·åœ¨ PR æè¿°ä¸­åŒ…å«ï¼š

```markdown
## å˜æ›´è¯´æ˜
ç®€è¦æè¿°è¿™ä¸ª PR åšäº†ä»€ä¹ˆ

## å˜æ›´ç±»å‹
- [ ] Bug ä¿®å¤
- [ ] æ–°åŠŸèƒ½
- [ ] ç ´åæ€§å˜æ›´
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] ä»£ç é‡æ„
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æµ‹è¯•æ”¹è¿›

## æµ‹è¯•
æè¿°å¦‚ä½•æµ‹è¯•è¿™äº›å˜æ›´

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å·²æ·»åŠ ç›¸åº”æµ‹è¯•
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] æäº¤ä¿¡æ¯ç¬¦åˆè§„èŒƒ

## ç›¸å…³ Issue
Closes #123
```

## é—®é¢˜æŠ¥å‘Š

### Bug æŠ¥å‘Šæ¨¡æ¿

```markdown
## Bug æè¿°
æ¸…æ™°ç®€æ´åœ°æè¿° bug

## å¤ç°æ­¥éª¤
1. æ‰§è¡Œ '...'
2. ç‚¹å‡» '....'
3. æ»šåŠ¨åˆ° '....'
4. çœ‹åˆ°é”™è¯¯

## æœŸæœ›è¡Œä¸º
æè¿°æ‚¨æœŸæœ›å‘ç”Ÿçš„äº‹æƒ…

## å®é™…è¡Œä¸º
æè¿°å®é™…å‘ç”Ÿçš„äº‹æƒ…

## ç¯å¢ƒä¿¡æ¯
- OS: [ä¾‹å¦‚ macOS, Linux, Windows]
- Go ç‰ˆæœ¬: [ä¾‹å¦‚ 1.20]
- Chi ç‰ˆæœ¬: [ä¾‹å¦‚ v1.0.0]

## é™„åŠ ä¿¡æ¯
æ·»åŠ ä»»ä½•å…¶ä»–å…³äºé—®é¢˜çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
```

### é—®é¢˜åˆ†ç±»

ä½¿ç”¨æ ‡ç­¾æ¥åˆ†ç±»é—®é¢˜ï¼š
- `bug`: è½¯ä»¶ç¼ºé™·
- `enhancement`: åŠŸèƒ½æ”¹è¿›
- `documentation`: æ–‡æ¡£ç›¸å…³
- `question`: ä½¿ç”¨é—®é¢˜
- `good first issue`: é€‚åˆæ–°è´¡çŒ®è€…
- `help wanted`: éœ€è¦å¸®åŠ©

## åŠŸèƒ½è¯·æ±‚

### åŠŸèƒ½è¯·æ±‚æ¨¡æ¿

```markdown
## åŠŸèƒ½æè¿°
æ¸…æ™°ç®€æ´åœ°æè¿°æ‚¨æƒ³è¦çš„åŠŸèƒ½

## é—®é¢˜æè¿°
æè¿°è¿™ä¸ªåŠŸèƒ½è¦è§£å†³çš„é—®é¢˜

## è§£å†³æ–¹æ¡ˆ
æè¿°æ‚¨æƒ³è¦çš„è§£å†³æ–¹æ¡ˆ

## æ›¿ä»£æ–¹æ¡ˆ
æè¿°æ‚¨è€ƒè™‘è¿‡çš„å…¶ä»–æ›¿ä»£æ–¹æ¡ˆ

## é™„åŠ ä¿¡æ¯
æ·»åŠ ä»»ä½•å…¶ä»–å…³äºåŠŸèƒ½è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
```

### è¯„ä¼°æ ‡å‡†

æˆ‘ä»¬ä¼šæ ¹æ®ä»¥ä¸‹æ ‡å‡†è¯„ä¼°åŠŸèƒ½è¯·æ±‚ï¼š
- æ˜¯å¦ç¬¦åˆé¡¹ç›®ç›®æ ‡
- æ˜¯å¦æœ‰å¹¿æ³›çš„ç”¨æˆ·éœ€æ±‚
- å®ç°å¤æ‚åº¦
- ç»´æŠ¤æˆæœ¬
- å‘åå…¼å®¹æ€§

## æ–‡æ¡£è´¡çŒ®

### æ–‡æ¡£ç±»å‹

- **API æ–‡æ¡£**: å‡½æ•°ã€æ–¹æ³•ã€ç±»å‹çš„è¯´æ˜
- **ç”¨æˆ·æŒ‡å—**: ä½¿ç”¨æ•™ç¨‹å’Œæœ€ä½³å®è·µ
- **å¼€å‘è€…æ–‡æ¡£**: æ¶æ„è®¾è®¡å’Œå†…éƒ¨å®ç°
- **ç¤ºä¾‹ä»£ç **: å®é™…ä½¿ç”¨åœºæ™¯æ¼”ç¤º

### æ–‡æ¡£è§„èŒƒ

1. **Markdown æ ¼å¼**: æ‰€æœ‰æ–‡æ¡£ä½¿ç”¨ Markdown æ ¼å¼
2. **ç»“æ„æ¸…æ™°**: ä½¿ç”¨é€‚å½“çš„æ ‡é¢˜å±‚çº§
3. **ä»£ç ç¤ºä¾‹**: æä¾›å®Œæ•´å¯è¿è¡Œçš„ç¤ºä¾‹
4. **é“¾æ¥æ£€æŸ¥**: ç¡®ä¿æ‰€æœ‰é“¾æ¥æœ‰æ•ˆ

### æ–‡æ¡£å®¡æŸ¥

æ–‡æ¡£å˜æ›´éœ€è¦é€šè¿‡å®¡æŸ¥ï¼š
- æŠ€æœ¯å‡†ç¡®æ€§
- è¯­è¨€æµç•…æ€§
- æ ¼å¼è§„èŒƒæ€§
- å®Œæ•´æ€§

## å‘å¸ƒæµç¨‹

### ç‰ˆæœ¬ç®¡ç†

æˆ‘ä»¬ä½¿ç”¨ [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/)ï¼š
- `MAJOR`: ä¸å…¼å®¹çš„ API å˜æ›´
- `MINOR`: å‘åå…¼å®¹çš„åŠŸèƒ½æ·»åŠ 
- `PATCH`: å‘åå…¼å®¹çš„ bug ä¿®å¤

### å‘å¸ƒå‡†å¤‡

å‘å¸ƒå‰æ£€æŸ¥æ¸…å•ï¼š
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] å˜æ›´æ—¥å¿—å·²æ›´æ–°
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] ç¤ºä¾‹ä»£ç å·²éªŒè¯

### å‘å¸ƒæµç¨‹

1. **åˆ›å»ºå‘å¸ƒåˆ†æ”¯**
   ```bash
   git checkout -b release/v1.1.0
   ```

2. **æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯**
   - æ›´æ–° `version.go`
   - æ›´æ–° `CHANGELOG.md`
   - æ›´æ–°æ–‡æ¡£ç‰ˆæœ¬

3. **åˆ›å»ºå‘å¸ƒ PR**
   - åˆå¹¶åˆ° main åˆ†æ”¯
   - åˆ›å»º Git æ ‡ç­¾

4. **å‘å¸ƒé€šçŸ¥**
   - GitHub Release
   - ç¤¾åŒºå…¬å‘Š

## ç¤¾åŒºå‚ä¸

### è®¨è®ºå¹³å°

- **GitHub Discussions**: æŠ€æœ¯è®¨è®ºå’Œé—®ç­”
- **GitHub Issues**: é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚
- **Pull Requests**: ä»£ç å®¡æŸ¥å’Œè®¨è®º

### è·å¾—å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ç°æœ‰çš„ [Issues](https://github.com/your-org/basic/issues)
2. æœç´¢ [Discussions](https://github.com/your-org/basic/discussions)
3. åˆ›å»ºæ–°çš„ Issue æˆ– Discussion
4. è”ç³»ç»´æŠ¤è€…

### è®¤å¯è´¡çŒ®è€…

æˆ‘ä»¬ä¼šåœ¨ä»¥ä¸‹æ–¹é¢è®¤å¯è´¡çŒ®è€…ï¼š
- åœ¨ README ä¸­åˆ—å‡ºè´¡çŒ®è€…
- åœ¨å‘å¸ƒè¯´æ˜ä¸­æ„Ÿè°¢è´¡çŒ®è€…
- é€šè¿‡ GitHub å¾½ç« è¡¨å½°æ´»è·ƒè´¡çŒ®è€…

## è®¸å¯è¯

é€šè¿‡è´¡çŒ®ä»£ç ï¼Œæ‚¨åŒæ„æ‚¨çš„è´¡çŒ®å°†æŒ‰ç…§ä¸é¡¹ç›®ç›¸åŒçš„ [MIT è®¸å¯è¯](./LICENSE) è¿›è¡Œè®¸å¯ã€‚

---

å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼Chi æ¡†æ¶å› ä¸ºåƒæ‚¨è¿™æ ·çš„è´¡çŒ®è€…è€Œå˜å¾—æ›´å¥½ã€‚

**æœ€åæ›´æ–°**: 2025-09-15
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0